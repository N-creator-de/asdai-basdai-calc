import streamlit as st
import numpy as np
import pandas as pd

# –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å seaborn –∏ matplotlib, –Ω–æ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è
try:
    import seaborn as sns
    import matplotlib.pyplot as plt
    SEABORN_AVAILABLE = True
except ModuleNotFoundError:
    SEABORN_AVAILABLE = False

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(page_title="ASDAS & BASDAI –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä", layout="centered")

# –ó–∞–≥–æ–ª–æ–≤–æ–∫
st.title("–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è (ASDAS & BASDAI)")

# –í–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç –≤—Ä–∞—á–∞
asdai = st.number_input("–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ ASDAS (–æ—Ç –≤—Ä–∞—á–∞):", min_value=0.0, max_value=10.0, step=0.1)
basdai = st.number_input("–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ BASDAI (–æ—Ç –≤—Ä–∞—á–∞):", min_value=0.0, max_value=10.0, step=0.1)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
def get_activity_level(asdai, basdai):
    if asdai < 1.3 and basdai < 4:
        return "üü¢ –ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ)"
    elif 1.3 <= asdai < 2.1 or 4 <= basdai < 6:
        return "üü° –£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–≤–æ–∑–º–æ–∂–µ–Ω –ø–µ—Ä–µ—Å–º–æ—Ç—Ä —Ç–µ—Ä–∞–ø–∏–∏)"
    else:
        return "üî¥ –í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Ä–µ–≤–º–∞—Ç–æ–ª–æ–≥–∞)"

# –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞
if st.button("–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"):
    result = get_activity_level(asdai, basdai)
    st.subheader("–†–µ–∑—É–ª—å—Ç–∞—Ç:")
    st.write(result)

    # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —à–∫–∞–ª—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ seaborn –¥–æ—Å—Ç—É–ø–µ–Ω
    if SEABORN_AVAILABLE:
        fig, ax = plt.subplots(figsize=(6, 1))
        cmap = sns.color_palette(["green", "yellow", "red"])
        activity_index = np.clip((asdai + basdai) / 2 / 10, 0, 1)  # –Ω–æ—Ä–º–∏—Ä—É–µ–º –≤ –¥–∏–∞–ø–∞–∑–æ–Ω 0-1
        sns.heatmap([[activity_index]], cmap=cmap, annot=False, cbar=False, ax=ax)
        ax.set_xticks([])
        ax.set_yticks([])
        ax.set_title("–®–∫–∞–ª–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏", fontsize=12)
        st.pyplot(fig)
    else:
        st.warning("‚ö†Ô∏è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ seaborn –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –≥—Ä–∞—Ñ–∏–∫ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.")

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à–∫–∞–ª–∞—Ö
st.markdown("""
### üìù –û—Ü–µ–Ω–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **ASDAS < 1.3 –∏ BASDAI < 4** ‚Üí –ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚úÖ  
- **ASDAS 1.3-2.1 –∏–ª–∏ BASDAI 4-6** ‚Üí –£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚ö†Ô∏è  
- **ASDAS > 2.1 –∏–ª–∏ BASDAI > 6** ‚Üí –í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚ùó  

### üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- **–ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Üí –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 6 –º–µ—Å—è—Ü–µ–≤  
- **–£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Üí –≤–æ–∑–º–æ–∂–µ–Ω –ø–µ—Ä–µ—Å–º–æ—Ç—Ä —Ç–µ—Ä–∞–ø–∏–∏  
- **–í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Üí –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å–∏–ª–µ–Ω–∏–µ —Ç–µ—Ä–∞–ø–∏–∏ –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞  
""")
